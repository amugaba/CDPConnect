<?xml version="1.0" encoding="utf-8"?>
<assessment:InterviewForm xmlns:fx="http://ns.adobe.com/mxml/2009" 
			 xmlns:s="library://ns.adobe.com/flex/spark" 
			 xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:dci="components.dci.*" width="100%" height="100%"
			 labelWidth="315" xmlns:assessment="components.assessment.*">
	<fx:Script>
		<![CDATA[
			import components.assessment.InterviewType;
			import components.assessment.InterviewType;
			import components.questions.QuestionList;
			import components.questions.QuestionText;
			import components.questions.QuestionTextRefusable;
			import components.validators.Valid;
			
			import mx.binding.utils.BindingUtils;
			import mx.collections.ArrayList;
			import mx.controls.HRule;
			import mx.controls.Text;
			import mx.validators.NumberValidator;
			
			public var qAnyViolence:QuestionList = new QuestionList("AnyViolence","In your life have you ever experienced an event, series of events, or set of circumstances that resulted in you feeling physically or emotionally harmed or threatened?",ynrd,1);
			public var qViolenceDisaster:QuestionList = new QuestionList("ViolenceDisaster","Natural or man-made disaster",ynr,1);
			public var qViolenceSchool:QuestionList = new QuestionList("ViolenceSchool","Community or school violence",ynr,1);
			public var qViolenceInterpersonal:QuestionList = new QuestionList("ViolenceInterpersonal","Interpersonal violence (including physical, sexual, or psychological)",ynr,1);
			public var qViolenceMilitary:QuestionList = new QuestionList("ViolenceMilitary","Military trauma",ynr,1);
			public var qViolenceOther:QuestionList = new QuestionList("ViolenceOther","Other",ynr,1);
			public var qViolenceOtherSpec:QuestionText = new QuestionText("ViolenceOtherSpec","Other (specify)");
			
			public var qNightmares:QuestionList = new QuestionList("Nightmares","Have had nightmares about it or thought about it when you did not want to?",ynrd,1);
			public var qTriedHard:QuestionList = new QuestionList("TriedHard","Tried hard not to think about it or went out of your way to avoid situations that remind you of them?",ynrd,1);
			public var qConstantGuard:QuestionList = new QuestionList("ConstantGuard","Were constantly on guard, watchful, or easily startled?",ynrd,1);
			public var qNumbAndDetach:QuestionList = new QuestionList("NumbAndDetach","Felt numb and detached from others, activities, or your surroundings?",ynrd,1);
			public var qPhysicallyHurt:QuestionList = new QuestionList("PhysicallyHurt","In the past 30 days, how often have you experienced an event, series of events of set of circumstances that resulted in you feeling physically or emotionally harmed or threatened?",new ArrayList(["Never","A few times",
				"More than a few times",REFUSED_VALUE,DONT_KNOW_VALUE]),0);
			
			private var textKindOfEvent:Text;
			private var textFeel:Text;
			private var divider:HRule;
			
			//Health4 Form Area
			public override function createForm():void
			{
				//Questions
				addQuestion(qAnyViolence);
				textKindOfEvent = createText("What kind of event was this? (Select all that apply)","h1");
				addQuestion(qViolenceDisaster);
				addQuestion(qViolenceSchool);
				addQuestion(qViolenceInterpersonal);
				addQuestion(qViolenceMilitary);
				addQuestion(qViolenceOther);
				addQuestion(qViolenceOtherSpec);
				textFeel = createText("Did any of these experiences feel so frightening, horrible, or upsetting that in the past and/or the present you:","h1",590);
				addQuestion(qNightmares);
				addQuestion(qTriedHard);
				addQuestion(qConstantGuard);
				addQuestion(qNumbAndDetach);
				divider = addDivider();
				addQuestion(qPhysicallyHurt,130);
				
				//Validators
				Valid.addRequiredValidator(qViolenceOtherSpec);
				qViolenceOtherSpec.answerType = String;
				
				//Control Logic
				addSkipDropDown(qAnyViolence,["Yes"],[qViolenceDisaster,qViolenceSchool,qViolenceInterpersonal,qViolenceMilitary,qViolenceOther,qNightmares,qTriedHard,qConstantGuard,qNumbAndDetach],true);
				addSkipDropDown(qViolenceOther,["Yes"],[qViolenceOtherSpec],true);
				
			}
			
			//Certain questions are only visible during intake or reassessment
			public override function initForm():void
			{
				super.initForm();
				
				//If the interview is Intake, add back in the questions
				if(InterviewType.isIntake(global.pageDCI.interviewType))
				{
					if(questions.indexOf(qAnyViolence) == -1)
					{						
						addQuestion(qAnyViolence);
						addElement(textKindOfEvent);
						addQuestion(qViolenceDisaster);
						addQuestion(qViolenceSchool);
						addQuestion(qViolenceInterpersonal);
						addQuestion(qViolenceMilitary);
						addQuestion(qViolenceOther);
						addQuestion(qViolenceOtherSpec);
						addElement(textFeel);
						addQuestion(qNightmares);
						addQuestion(qTriedHard);
						addQuestion(qConstantGuard);
						addQuestion(qNumbAndDetach);
						addElement(divider);
						
						//move last question to the end
						addElementAt(qPhysicallyHurt,numElements-1);
					}
				}
				//If the interview is not Intake, remove the first set of questions
				else if(!InterviewType.isIntake(global.pageDCI.interviewType))
				{
					if(questions.indexOf(qAnyViolence) != -1)
					{
						removeQuestion(qAnyViolence);
						removeElement(textKindOfEvent);
						removeQuestion(qViolenceDisaster);
						removeQuestion(qViolenceSchool);
						removeQuestion(qViolenceInterpersonal);
						removeQuestion(qViolenceMilitary);
						removeQuestion(qViolenceOther);
						removeQuestion(qViolenceOtherSpec);
						removeElement(textFeel);
						removeQuestion(qNightmares);
						removeQuestion(qTriedHard);
						removeQuestion(qConstantGuard);
						removeQuestion(qNumbAndDetach);
						removeElement(divider);
					}
				}
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
</assessment:InterviewForm>
