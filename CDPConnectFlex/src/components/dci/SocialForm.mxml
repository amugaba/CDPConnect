<?xml version="1.0" encoding="utf-8"?>
<dci:DCIForm xmlns:fx="http://ns.adobe.com/mxml/2009" 
			 xmlns:s="library://ns.adobe.com/flex/spark" 
			 xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:dci="components.dci.*" width="100%" height="100%">
	<fx:Script>
		<![CDATA[
			import components.QuestionList;
			import components.QuestionText;
			import components.QuestionTextRefusable;
			
			import mx.binding.utils.BindingUtils;
			import mx.collections.ArrayList;
			import mx.validators.NumberValidator;
			
			public var qAttendVoluntary:QuestionList = new QuestionList("AttendVoluntary","Voluntary self-help groups for recovery that were not affiliated with a religious or faith-based organization",ynrdm,1);
			public var qAttendVoluntaryTimes:QuestionTextRefusable = new QuestionTextRefusable("AttendVoluntaryTimes","","0");
			public var qAttendReligious:QuestionList = new QuestionList("AttendReligious","Religious/faith affiliated recovery self-help groups",ynrdm,1);
			public var qAttendReligiousTimes:QuestionTextRefusable = new QuestionTextRefusable("AttendReligiousTimes","","0");
			public var qAttendOtherOrg:QuestionList = new QuestionList("AttendOtherOrg","Meetings of organizations that support recovery other than the organizations described above",ynrdm,1);
			public var qAttendOtherOrgTimes:QuestionTextRefusable = new QuestionTextRefusable("AttendOtherOrgTimes","","0");
			public var qInteractFamilyFriends:QuestionList = new QuestionList("InteractFamilyFriends","In the past 30 days, did you have interaction with family and/or friends that are supportive of your recovery?",ynrdm,1);
			public var qWhomInTrouble:QuestionList = new QuestionList("WhomInTrouble","To whom do you turn to when you are having trouble?",new ArrayList(["No One","Clergy Member","Family Member","Friends","Other","Refused","Don't Know","Missing Data"]),0);
			public var qWhomInTroubleSpec:QuestionText = new QuestionText("WhomInTroubleSpec","Other, specify:","");
			
			//Social Form Area
			public override function createForm():void
			{
				//Questions
				createText("In the past 30 days, did you attend any _____? If yes, specify how many times.","h1");
				addSocialQuestion(qAttendVoluntary,qAttendVoluntaryTimes,64);
				addSocialQuestion(qAttendReligious,qAttendReligiousTimes,36);
				addSocialQuestion(qAttendOtherOrg,qAttendOtherOrgTimes,50);				
				addQuestion(qInteractFamilyFriends);				
				addQuestion(qWhomInTrouble);
				addQuestion(qWhomInTroubleSpec);
				
				//Validators
				addRequiredValidator(qWhomInTroubleSpec);
				
				//Control Logic
				addSkipDropDown(qWhomInTrouble,["No One","Clergy Member","Family Member","Friends","Refused","Don't Know","Missing Data"],[qWhomInTroubleSpec]);				
			}
			protected function addSocialQuestion(socialQ:QuestionList, daysQ:QuestionTextRefusable, height:int=22):void
			{
				addQuestion(socialQ);
				socialQ.inputControl.width = 90;
				socialQ.direction = "horizontal";
				
				questions.push(daysQ);
				socialQ.addElement(daysQ.input);
				socialQ.addElement(daysQ.refuseInput);
				daysQ.inline = true;
				
				addNumberValidator(daysQ,1,30,true);
				addSkipDropDown(socialQ,["No","Refused","Don't Know","Missing Data"],[daysQ]);
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
</dci:DCIForm>
